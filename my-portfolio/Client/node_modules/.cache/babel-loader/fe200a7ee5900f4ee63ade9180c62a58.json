{"ast":null,"code":"import _regeneratorRuntime from \"/home/blasphemous/Web-Dev/my-portfolio/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/blasphemous/Web-Dev/my-portfolio/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/home/blasphemous/Web-Dev/my-portfolio/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/blasphemous/Web-Dev/my-portfolio/Client/src/components/Posts.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { ThumbUpIcon, AnnotationIcon } from \"@heroicons/react/solid\";\nimport Axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\nexport default function Posts(_ref) {\n  var _this = this;\n\n  var newPost = _ref.newPost,\n      setNewPost = _ref.setNewPost;\n  var user = JSON.parse(sessionStorage.getItem('data'));\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      data = _useState2[0],\n      setData = _useState2[1];\n\n  useNavigate();\n\n  var putLike = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(pid) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!(user != null)) {\n                _context.next = 3;\n                break;\n              }\n\n              _context.next = 3;\n              return Axios.put('https://api.rauladamson.duckdns.org/api/put/likes', {\n                uid: user.id,\n                post_id: pid\n              }).then(function (res) {\n                Axios.get('https://api.rauladamson.duckdns.org/api/get/allposts').then(function (response) {\n                  console.log(response);\n                  setData(response.data);\n                });\n                console.log(user.id);\n                console.log(res);\n                console.log(res.data);\n              }).catch(function (err) {\n                console.log(err);\n              });\n\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function putLike(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var allNewPosts = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              if (!(newPost === true)) {\n                _context2.next = 4;\n                break;\n              }\n\n              setNewPost(false);\n              _context2.next = 4;\n              return Axios.get('https://api.rauladamson.duckdns.org/api/get/allposts').then(function (res) {\n                setData(res.data);\n              });\n\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function allNewPosts() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  allNewPosts();\n\n  var getPosts = function getPosts() {\n    return Axios.get('https://api.rauladamson.duckdns.org/api/get/allposts').then(function (response) {\n      return response.data;\n    });\n  };\n\n  useEffect(function () {\n    return getPosts().then(function (res) {\n      for (var i = 0; i < res[0].pid; i++) {\n        setData(res);\n      }\n    }).catch(function (err) {\n      return console.log(err);\n    });\n  }, []);\n  return /*#__PURE__*/React.createElement(\"main\", {\n    className: \" mt-20 h-full\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex flex-col w-full mb-20 animate-slide\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(AnnotationIcon, {\n    className: \"mx-auto inline-block w-10 mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"flex justify-center sm:text-4xl text-3xl font-medium title-font mb-4 text-white\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 21\n    }\n  }, \"Posts\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"md:overflow-auto h-screen\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }\n  }, data.map(function (item) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"flex justify-center \",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      key: item.pid,\n      className: \" bg-gray-800 mb-10 w-full md:w-1/2 flex flex-col rounded-3xl h-72 animate-slide-fast\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \" flex flex-row mt-5 mb-4\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \" w-1/4\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(\"h1\", {\n      className: \"flex flex-row title-font sm:text-4xl col-span-2 text-3xl font-medium text-white w-2/4 justify-center\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 29\n      }\n    }, item.title), /*#__PURE__*/React.createElement(\"h3\", {\n      className: \"flex justify-end pr-7 text-xl w-1/4\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 29\n      }\n    }, item.author)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"flex h-full justify-center text-white\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"flex flex-col h-1/2 align-bottom justify-end\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 29\n      }\n    }, item.body)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"flex justify-between mb-5\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"ml-7\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 29\n      }\n    }, item.date_created.split('T')[0]), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"flex mr-7\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      onClick: function onClick() {\n        return putLike(item.pid);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(ThumbUpIcon, {\n      className: \"w-5 mr-1 hover:text-white\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 77\n      }\n    })), item.likes))));\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }\n  })));\n}","map":{"version":3,"sources":["/home/blasphemous/Web-Dev/my-portfolio/Client/src/components/Posts.js"],"names":["React","useEffect","useState","ThumbUpIcon","AnnotationIcon","Axios","useNavigate","Posts","newPost","setNewPost","user","JSON","parse","sessionStorage","getItem","data","setData","putLike","pid","put","uid","id","post_id","then","res","get","response","console","log","catch","err","allNewPosts","getPosts","i","map","item","title","author","body","date_created","split","likes"],"mappings":";;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,WAAT,EAAsBC,cAAtB,QAA4C,wBAA5C;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,WAAT,QAA4B,kBAA5B;AACA,eAAe,SAASC,KAAT,OAAsC;AAAA;;AAAA,MAAtBC,OAAsB,QAAtBA,OAAsB;AAAA,MAAbC,UAAa,QAAbA,UAAa;AACjD,MAAMC,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWC,cAAc,CAACC,OAAf,CAAuB,MAAvB,CAAX,CAAb;;AADiD,kBAE1BZ,QAAQ,CAAC,EAAD,CAFkB;AAAA;AAAA,MAE1Ca,IAF0C;AAAA,MAErCC,OAFqC;;AAGjDV,EAAAA,WAAW;;AACX,MAAMW,OAAO;AAAA,yEAAG,iBAAMC,GAAN;AAAA;AAAA;AAAA;AAAA;AAAA,oBACAR,IAAI,IAAI,IADR;AAAA;AAAA;AAAA;;AAAA;AAAA,qBAEEL,KAAK,CAACc,GAAN,CAAU,mDAAV,EAA+D;AAACC,gBAAAA,GAAG,EAAEV,IAAI,CAACW,EAAX;AAAeC,gBAAAA,OAAO,EAAEJ;AAAxB,eAA/D,EACLK,IADK,CACC,UAAAC,GAAG,EAAI;AACdnB,gBAAAA,KAAK,CAACoB,GAAN,CAAU,sDAAV,EAAkEF,IAAlE,CAAuE,UAAAG,QAAQ,EAAI;AAC3EC,kBAAAA,OAAO,CAACC,GAAR,CAAYF,QAAZ;AACAV,kBAAAA,OAAO,CAACU,QAAQ,CAACX,IAAV,CAAP;AACP,iBAHD;AAIIY,gBAAAA,OAAO,CAACC,GAAR,CAAYlB,IAAI,CAACW,EAAjB;AACAM,gBAAAA,OAAO,CAACC,GAAR,CAAYJ,GAAZ;AACAG,gBAAAA,OAAO,CAACC,GAAR,CAAYJ,GAAG,CAACT,IAAhB;AACH,eATK,EASHc,KATG,CASG,UAAAC,GAAG,EAAI;AACZH,gBAAAA,OAAO,CAACC,GAAR,CAAYE,GAAZ;AACH,eAXK,CAFF;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAPb,OAAO;AAAA;AAAA;AAAA,KAAb;;AAgBA,MAAMc,WAAW;AAAA,yEAAE;AAAA;AAAA;AAAA;AAAA;AAAA,oBAChBvB,OAAO,KAAK,IADI;AAAA;AAAA;AAAA;;AAEXC,cAAAA,UAAU,CAAC,KAAD,CAAV;AAFW;AAAA,qBAGLJ,KAAK,CAACoB,GAAN,CAAU,sDAAV,EACLF,IADK,CACA,UAAAC,GAAG,EAAI;AACTR,gBAAAA,OAAO,CAACQ,GAAG,CAACT,IAAL,CAAP;AACH,eAHK,CAHK;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAF;;AAAA,oBAAXgB,WAAW;AAAA;AAAA;AAAA,KAAjB;;AASJA,EAAAA,WAAW;;AACP,MAAMC,QAAQ,GAAG,SAAXA,QAAW,GAAM;AACnB,WAAO3B,KAAK,CAACoB,GAAN,CAAU,sDAAV,EAAkEF,IAAlE,CAAuE,UAAAG,QAAQ,EAAI;AACtF,aAAOA,QAAQ,CAACX,IAAhB;AACH,KAFM,CAAP;AAGH,GAJD;;AAKCd,EAAAA,SAAS,CAAC;AAAA,WAAM+B,QAAQ,GACpBT,IADY,CACP,UAACC,GAAD,EAAS;AACX,WAAK,IAAIS,CAAC,GAAC,CAAX,EAAcA,CAAC,GAAGT,GAAG,CAAC,CAAD,CAAH,CAAON,GAAzB,EAA6Be,CAAC,EAA9B,EAAiC;AAC7BjB,QAAAA,OAAO,CAACQ,GAAD,CAAP;AACH;AACJ,KALY,EAMZK,KANY,CAMN,UAACC,GAAD;AAAA,aAASH,OAAO,CAACC,GAAR,CAAYE,GAAZ,CAAT;AAAA,KANM,CAAN;AAAA,GAAD,EAM6B,EAN7B,CAAT;AASD,sBAEI;AAAM,IAAA,SAAS,EAAC,eAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAK,IAAA,SAAS,EAAC,0CAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACQ,oBAAC,cAAD;AAAgB,IAAA,SAAS,EAAC,gCAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADR,eAEQ;AAAI,IAAA,SAAS,EAAC,iFAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAFR,CADJ,eAOI;AAAK,IAAA,SAAS,EAAC,2BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACCf,IAAI,CAACmB,GAAL,CAAU,UAACC,IAAD;AAAA,wBACP;AAAK,MAAA,SAAS,EAAC,sBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAK,MAAA,GAAG,EAAEA,IAAI,CAACjB,GAAf;AAAoB,MAAA,SAAS,EAAC,sFAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAK,MAAA,SAAS,EAAC,0BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAK,MAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,eAEI;AAAI,MAAA,SAAS,EAAC,sGAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAsHiB,IAAI,CAACC,KAA3H,CAFJ,eAGI;AAAI,MAAA,SAAS,EAAC,qCAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAqDD,IAAI,CAACE,MAA1D,CAHJ,CADJ,eAMI;AAAK,MAAA,SAAS,EAAC,uCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAG,MAAA,SAAS,EAAC,8CAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA6DF,IAAI,CAACG,IAAlE,CADJ,CANJ,eASI;AAAK,MAAA,SAAS,EAAC,2BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAG,MAAA,SAAS,EAAC,MAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAsBH,IAAI,CAACI,YAAN,CAAoBC,KAApB,CAA0B,GAA1B,EAA+B,CAA/B,CAArB,CADJ,eAEI;AAAG,MAAA,SAAS,EAAC,WAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAQ,MAAA,OAAO,EAAE;AAAA,eAAOvB,OAAO,CAACkB,IAAI,CAACjB,GAAN,CAAd;AAAA,OAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAA4C,oBAAC,WAAD;AAAa,MAAA,SAAS,EAAC,2BAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAA5C,CADJ,EAEKiB,IAAI,CAACM,KAFV,CAFJ,CATJ,CADJ,CADO;AAAA,GAAV,CADD,eAsBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAtBA,CAPJ,CAFJ;AAqCS","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { ThumbUpIcon, AnnotationIcon } from \"@heroicons/react/solid\";\nimport Axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\nexport default function Posts({newPost, setNewPost}) {\n    const user = JSON.parse(sessionStorage.getItem('data'));\n    const [data,setData] = useState([])\n    useNavigate();\n    const putLike = async(pid) => {\n                if (user != null) {\n                await Axios.put('https://api.rauladamson.duckdns.org/api/put/likes', {uid: user.id, post_id: pid})\n                .then (res => {\n                Axios.get('https://api.rauladamson.duckdns.org/api/get/allposts').then(response => {\n                        console.log(response)\n                        setData(response.data)\n                })\n                    console.log(user.id)\n                    console.log(res)\n                    console.log(res.data)\n                }).catch(err => {\n                    console.log(err)\n                })\n            }\n    }\n    const allNewPosts= async() => {\n    if(newPost === true){\n            setNewPost(false);\n            await Axios.get('https://api.rauladamson.duckdns.org/api/get/allposts')\n            .then(res => {\n                setData(res.data)\n            })\n    }\n}\nallNewPosts()\n    const getPosts = () => {\n        return Axios.get('https://api.rauladamson.duckdns.org/api/get/allposts').then(response => {\n            return response.data\n        });\n    };\n     useEffect(() => getPosts()\n        .then((res) => {\n            for (let i=0; i < res[0].pid;i++){\n                setData(res)\n            }\n        })\n        .catch((err) => console.log(err)), [])\n\n\n    return(\n        \n        <main className=\" mt-20 h-full\">\n            <div className=\"flex flex-col w-full mb-20 animate-slide\">\n                    <AnnotationIcon className=\"mx-auto inline-block w-10 mb-4\" />\n                    <h1 className=\"flex justify-center sm:text-4xl text-3xl font-medium title-font mb-4 text-white\">\n                        Posts\n                    </h1>\n            </div>\n            <div className=\"md:overflow-auto h-screen\">\n            {data.map(((item) => (\n                <div className=\"flex justify-center \">\n                    <div key={item.pid} className=\" bg-gray-800 mb-10 w-full md:w-1/2 flex flex-col rounded-3xl h-72 animate-slide-fast\">\n                        <div className=\" flex flex-row mt-5 mb-4\">\n                            <div className=\" w-1/4\"></div>\n                            <h1 className=\"flex flex-row title-font sm:text-4xl col-span-2 text-3xl font-medium text-white w-2/4 justify-center\">{item.title}</h1>\n                            <h3 className=\"flex justify-end pr-7 text-xl w-1/4\">{item.author}</h3>\n                        </div>\n                        <div className=\"flex h-full justify-center text-white\">\n                            <p className=\"flex flex-col h-1/2 align-bottom justify-end\">{item.body}</p>\n                        </div>\n                        <div className=\"flex justify-between mb-5\">\n                            <p className=\"ml-7\">{(item.date_created).split('T')[0]}</p>\n                            <p className=\"flex mr-7\">\n                                <button onClick={() => (putLike(item.pid))}><ThumbUpIcon className=\"w-5 mr-1 hover:text-white\"/></button>\n                                {item.likes}\n                            </p>\n                        </div>\n                    </div>\n                </div>\n            )))}\n            <div>\n\n            </div>\n            </div>\n        </main>\n    )\n            }"]},"metadata":{},"sourceType":"module"}